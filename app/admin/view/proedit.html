{include file='public/header'/}
<main class="lyear-layout-content">

    <div class="container-fluid p-t-15">

        <div class="row">
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">项目编辑</div>
                    </div>
                    <div class="card-body">
                        <form class="needs-validation" novalidate>
                            <div class="input-group">
                                <input type="text" class="form-control" value="{$key}" disabled>
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" type="button">复制</button>
                                    <button class="btn btn-outline-secondary" type="button">变更</button>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label for="validationTooltip01">项目ID</label>
                                    <div class="form-group">
                                        <input type="text" value="{$id}" name="{$id}" class="form-control"
                                            id="exampleFormControlInput1" placeholder="" disabled>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label for="validationTooltip02">项目名称</label>
                                    <div class="form-group">
                                        <input type="text" value="{$name}" name="pro_name" class="form-control"
                                            id="exampleFormControlInput1" placeholder="请输入项目名称">
                                    </div>
                                </div>
                            </div>
                            <div>
                                <button type="button" onclick="pro()"
                                    class="btn btn-outline-yellow btn-block">保存</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="card wave wave-animate-slow wave-primary">
                                    <div class="card-body position-relative">
                                        <div class="flex-box">
                                            <span class="img-avatar img-avatar-48 bg-translucent"><i
                                                    class="mdi mdi-comment-outline fs-22"></i></span>
                                            <span class="fs-22 lh-22">{$user} 个</span>
                                        </div>
                                        <div class="text-right">用户总数</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card wave wave-animate wave-danger">
                                    <div class="card-body position-relative">
                                        <div class="flex-box">
                                            <span class="img-avatar img-avatar-48 bg-translucent"><i
                                                    class="mdi mdi-comment-outline fs-22"></i></span>
                                            <span class="fs-22 lh-22">{$kami} 个</span>
                                        </div>
                                        <div class="text-right">卡密总数</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card wave wave-animate-fast wave-info">
                                    <div class="card-body position-relative">
                                        <div class="flex-box">
                                            <span class="img-avatar img-avatar-48 bg-translucent"><i
                                                    class="mdi mdi-comment-outline fs-22"></i></span>
                                            <span class="fs-22 lh-22">{$api} 个</span>
                                        </div>
                                        <div class="text-right">已有接口</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">

            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">账户控制</div>
                        <ul class="card-actions">
                            <div class="col-xs-16">
                                <div class="custom-control custom-switch custom-dark">

                                </div>
                            </div>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="validationTooltip03">设备登录间隔</label>
                            <input type="text" name="login_Interval" class="form-control" id="validationTooltip03"
                                placeholder="在旧设备登录成功起新设备将无法在设置的时间内重新登录" value="{$login_Interval}" required>
                        </div>
                        <div class="form-group">
                            <label for="validationTooltip03">最多设备登录</label>
                            <input type="text" name="login_mac" class="form-control" id="validationTooltip03"
                                placeholder="1为禁止多设备登录" value="{$login_mac}" required>
                        </div>
                        <div class="form-group">
                            <label for="validationTooltip03">签到所得特权</label>
                            <input type="text" name="login_sgin" class="form-control" id="validationTooltip03"
                                placeholder="请输入内容 0为不设置" value="{$login_sgin}" required>
                        </div>
                        <div>
                            <button type="button" onclick="login()" class="btn btn-outline-yellow btn-block">保存</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">卡密控制</div>
                        <ul class="card-actions">
                            <div class="col-xs-16">
                                <div class="custom-control custom-switch custom-dark">
                                </div>
                            </div>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="validationTooltip05" data-toggle="tooltip" data-placement="bottom"
                                title="卡密最多能够登录设备数量">登录设备？</label>
                            <input type="text" name="kami_mac" class="form-control" id="validationTooltip03"
                                placeholder="请输入内容 0为不限制" value="{$kami_mac}" required>
                        </div>
                        <div class="form-group">
                            <label for="validationTooltip05" data-toggle="tooltip" data-placement="bottom"
                                title="卡密最多能够登录设备数量">登录间隔？</label>
                            <input type="text" name="kami_Interval" class="form-control" id="validationTooltip03"
                                placeholder="请输入内容 0为不限制" value="{$kami_Interval}" required>
                        </div>
                        <div class="form-group">
                            <label for="validationTooltip05" data-toggle="tooltip" data-placement="bottom"
                                title="签到可增加时间/分钟">签到特权？[小时为单位]</label>
                            <input type="text" name="kami_sgin" class="form-control" id="validationTooltip03"
                                placeholder="请输入内容 0为不增加" value="{$kami_sgin}" required>
                        </div>
                        <div>
                            <button type="button" onclick="kami()" class="btn btn-outline-yellow btn-block">保存</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">传输控制</div>
                        <ul class="card-actions">
                            <div class="col-xs-16">
                                <div class="custom-control custom-switch custom-danger">

                                </div>
                            </div>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <div>
                                <a href="">加密类型</a>
                                <a href="" class="text-right">当前加密类型为：{$encrypt}</a>
                            </div>
                            <select class="form-control" name="return_encrypt" id="return_encrypt">
                                <option {if $encrypt=='0' selected="select" } value="0">不加密 0</option>
                                <option {if $encrypt=='1' selected="select" } value="1">AES-128-ECB 1</option>
                                <option {if $encrypt=='2' selected="select" } value="2">BASE64 2</option>
                            </select>
                        </div>
                        <div class="form-group" id="encode_type_a">
                            <div class="alert alert-info" role="alert">
                                如不启用密文传输则数据将以明文方式返回用户存在致命安全隐患<a href="#!" class="alert-link">我不了解?</a>
                            </div>
                        </div>
                        <div class="form-group" id="encode_type_b">
                            <label for="validationTooltip03">AES-128-ECB密匙</label>
                            <input type="text" name="aes" class="form-control" id="validationTooltip03"
                                placeholder="请输入密码" value="" required>
                        </div>
                        <div>
                            <button type="button" onclick="return_encrypt()"
                                class="btn btn-outline-yellow btn-block">保存</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">提交控制</div>
                        <ul class="card-actions">
                            <div class="col-xs-16">
                                <div class="custom-control custom-switch custom-dark">

                                </div>
                            </div>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <div>
                                <a href="">加密类型</a>
                                <a href="" class="text-right">当前加密类型为：{$project.submit_encrypt}</a>
                                <label for="validationTooltip05" data-toggle="tooltip" data-placement="bottom"
                                    title="即将提交的内容经过指定的加密方式加密后再提交到服务器上处理[服务器会主动判断加密方式去进行解密]">提交加密？</label>
                            </div>
                            <select class="form-control" name="submit_encrypt" id="submit_encrypt">
                                <option {if $encrypt=='0' selected="select" } value="0">不加密 0</option>
                                <option {if $encrypt=='1' selected="select" } value="1">AES-128-ECB 1</option>
                                <option {if $encrypt=='2' selected="select" } value="2">BASE64 2</option>
                            </select>
                        </div>
                        <div class="form-group" id="encode_type_a">
                            <div class="alert alert-info" role="alert">
                                如不启用密文传输则数据将以明文方式返回用户存在致命安全隐患<a href="#!" class="alert-link">我不了解?</a>AES-128-ECB加密所使用的密匙将会是传输控制中所设置的值
                            </div>
                        </div>
                        <div>
                            <button type="button" onclick="submit_encrypt()"
                                class="btn btn-outline-yellow btn-block">保存</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

{include file='public/footer'/}

<script>
    function login() {
        var id = "{$id}";//1
        var login_Interval = $("input[name='login_Interval']").val();//1
        var login_mac = $("input[name='login_mac']").val();//1
        var sgin = $("input[name='login_sgin']").val();//1
        $.post("{:url('login_submit')}", {
            login_Interval: login_Interval,
            id: id,
            login_mac: login_mac,
            sgin: sgin
        }, function (res) {
            if (res.code == 200) {
                showNotify(res.msg, 'success');
            } else {
                showNotify(res.msg, 'danger');
            }
        })
    }

    function kami() {
        var id = "{$id}";//1
        var kami_Interval = $("input[name='kami_Interval']").val();//1
        var mac = $("input[name='kami_mac']").val();//1
        var sgin = $("input[name='kami_sgin']").val();//1
        $.post("{:url('kami_submit')}", {
            kami_Interval: kami_Interval,
            id: id,
            mac: mac,
            sgin: sgin
        }, function (res) {
            if (res.code == 200) {
                showNotify(res.msg, 'success');
            } else {
                showNotify(res.msg, 'danger');
            }
        })
    }

    function return_encrypt() {
        var id = "{$id}";//1
        var aes = $("input[name='aes']").val();//1
        var return_encrypt = $("select[name='return_encrypt']").val();//1
        $.post("{:url('return_encrypt')}", {
            aes: aes,
            id: id,
            return_encrypt: return_encrypt
        }, function (res) {
            if (res.code == 200) {
                showNotify(res.msg, 'success');
            } else {
                showNotify(res.msg, 'danger');
            }
        })
    }

    function submit_encrypt() {
        var id = "{$id}";//1
        var submit_encrypt = $("select[name='submit_encrypt']").val();//1
        $.post("{:url('submit_encrypt')}", {
            id: id,
            submit_encrypt: submit_encrypt
        }, function (res) {
            if (res.code == 200) {
                showNotify(res.msg, 'success');
            } else {
                showNotify(res.msg, 'danger');
            }
        })
    }

    function pro() {
        var id = "{$id}";//1
        var pro_name = $("input[name='pro_name']").val();//1
        $.post("{:url('pro_submit')}", {
            pro_name: pro_name,
            id: id
        }, function (res) {
            if (res.code == 200) {
                showNotify(res.msg, 'success');
            } else {
                showNotify(res.msg, 'danger');
            }
        })
    }
</script>